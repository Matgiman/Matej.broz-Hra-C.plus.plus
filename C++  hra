#include <iostream>
#include <cstdlib> // Tato knihovna obsahuje funkci rand(), která generuje pseudonáhodné číslo, které potřebujeme v kódu. Dále obsahuje například srand() pro nastavení generátoru náhodných čísel.
#include <ctime>  // Tato knihovna poskytuje funkci time(), kterou používá v kombinaci s srand()
using namespace std;

void uvodniKonverzace();
void uvodniVolba();
bool vyberPostavy();
void minibossKonverzace();
void hlavnibossKonerzace();
void obchodHercules();
void obchodMnich();
void obchodMnich2();
void obchodHercules2();
void obchodHercules3();
void obchodMnich3();
void obchodHercules4();
void obchodMnich4();
void obchodHercules5();
void obchodMnich5();
void obchodHercules6();
void obchodMnich6();
void obchodHercules7();
void obchodMnich7();
void pripravNaBoj();
void rychlyBoj();
void zacniBoj();
void zacniDruhyBoj();
void zacniTretiBoj();
void zacniCtvrtyBoj();
void zacniPatyBoj();
void zacniSestyboj();
void bojSVextilem();
void konec();
bool aktivujObchod();
bool aktivujObchod2();
bool aktivujObchod3();
bool aktivujObchod4();
bool aktivujObchod5();
bool aktivujObchod6();
bool aktivujObchod7();

float zivoty = 5.0;
int utok = 3;
int zlato = 2;
int mana = 2;
float zkusenosti = 0;
int volbaPostavy;
int vesniceVolba;
int nakupVolba;
bool vObchode = true;
bool delovaRanaAktivni = false;
int kolaDeloveRany = 0;

void uvodniKonverzace() {
    cout << "Vitej ve hre Smrtelna vez.\n";
    cout << "Kdysi davno tuto vez ovladal tvuj otec a moudre vladl okolnim vesnicim.\n";
    cout << "Vesnicani zili v miru a v klidu obchodovaly. Nahle vsak prsel do vesnice Vextile\n";
    cout << "Nikdo nevedel kdo to je, odkud prisel, ale mel neco co vsichni chteli. Mel zlato a byl to mistr v pletichareni.\n";
    cout << "Dokazal menit vlastni schopnosti a sliboval vsem vesnicanum, ze kdyz mu pomuzou muze pak vyrabet i zlato.\n";
    cout << "Vesnicane byli nadseni, ale netusili, ze se blizi zkaza, Vextile chtel pomoc od stareho kouzelnika.\n";
    cout << "S je ho pomoci chtel pripravit specialni napoj, aby zlepsil svoje schopnosti, vse to videl stary knihovnik.\n";
    cout << "Ten pak prichlizel, jak dava Vextile vypit lektvar 13 nejlepsim vesnicanum.\n";
    cout << endl;
    cout << "Vsech 13 vesnicanu, kteri byli schopni bojovat vypilo lektvary, v domeni ze ziskaji schopnost generovat zlato.\n";
    cout << "Jenze to byla past, po vypiti se z nich stali monstra, knihovnik mezitim utekl a Vextile sel zabirat vesnice.\n";
    cout << "Nova monstra poslouchali jen jeho rozkazy a Vextile se pripravoval znicit i vez s tvym otcem.\n";
    cout << "Stary knihovnik chtel varovat tveho otce, ale bylo uz pozde, dva zradni bratri Vexove, pomocnici Vextile ho zajali.\n";
    cout << "Knihovnikovi se vsak povedlo zachranit tebe, maleho syna stareho vladce veze a utect z vesnice do bezpeci.\n";
    cout << "Vesnicane se marne branili, prtoi mosntrum, bratrum Vexum a Vextilovi jim nic nepomohlo.\n";
    cout << endl;
    cout << "Po porazce byli nuceni obchodovat a pracovat pro Vextile. Ten se usidlil ve vezi a zacal vladnout tvrdou rukou.\n";
    cout << "Jeho cil je podmanit si takto i dalsi vesnice a mit vetsi moc a vice monster.\n";
    cout << "Stary knihovnik i s tebou stihl prchnout co nejdal do jezkyniho ukrytu.\n";
    cout << "Zde te naucil vechno co si pamatoval od bojovnych vesnicanu.\n";
    cout << "Od teto hrozne tragedie uteklo uz 20 let a ted jsi uz dost stary na to aby jsi zanl pravdu.\n";
    cout << "Nyni je stary knihovnik mrtvy a ty jsi pripraven pomstit jeho i smrt otce a ostatnich.\n";
    cout << "Vextile mezitim ovladl i dalsi vesnice, stale vsak sidli ve smrtelne vezi tveho otce.\n";
    cout << endl;
    cout << "Stale ho chrani i 13 monster a mini bossove bratri Vexove.\n";
    cout << "Tvym ukolem je dostat se nahoru, prezit, zabit mini bossy a hlavniho bosse Vextile\n";
    cout << "Nezapomen ze monstra jsou ve skutecnosti jen nevini vesnicane, ale i tak je musis zabit.\n";
    cout << "Neboj se, na konci bude sance vratit vsem monsrum zivot a udelat z nich opet vesnicany.\n";
    cout << "Stary knihovnik ti dal lektvar, ktery je dokaze promenit zpet, ale k jeho vyrobe je potreba jeste malickost.\n";
    cout << "Je to krev samotneho Vextile, pokud se chces stat hrdinou musis se mu postavit i jeho monstrum a mini bosum.\n";
    cout << "Nyni se nachazis pred vesncici, zde je misto klidu a miru, vesnicani ti pomuzou na tve ceste.\n";
    cout << endl;
    cout << "Mimo vesnice je ale uzemi monster a ty nemaji slitovani, ani dusi, umi jen jednine, zabijet.\n";
    cout << "Za kazde porazene monstrum ziskas zkusenosti, manu a zlato.\n";
    cout << "Ty pak pouzijes ve vesnici na vylepseni schopnosti.\n";
    cout << "Stary knihovnik jeste pred smrti ti dal navod na dva kouzelne lektvary.\n";
    cout << "Muzes vypit jen jeden, kazdy ti da schopnost jine postavy.\n";
    cout << "Zde mas podrobnosti o jednotlivych postavach, vybírej moudre: \n";
    cout << endl;
    uvodniVolba();
}

void uvodniVolba() {
    int volba;
    cout << "1. Pokracovat do vyberu postavy\n";
    cout << "2. Ukoncit hru\n";
    cout << "Tva volba: ";
    cin >> volba;

    if (volba == 1) {
        cout << "\nHodne stesti tvoje cesta zacina.\n";
        vyberPostavy();
    } else if (volba == 2) {
        cout << "\nRozhodl ses skoncit drive, nez jsi zacal. Konec hry.\n";
        exit(0);
    } else {
        cout << "\nNeplatna volba, zkus to znovu.\n";
        uvodniVolba();
    }
}



bool vyberPostavy() {
    cout << "1. Postava:\n";
    cout << "- Jmeno: Herkules\n";
    cout << "- Zivoty: 5\n";
    cout << "- Mana: 2\n";
    cout << "- Zlato: 2\n";
    cout << "- Zkusenosti: 0\n";
    cout << "- Utok: 3\n";
    cout << "- Schopnost: Delova rana = Za 2 many bude mit na 2 nasledujici kola dvojnasobny utok\n\n";

    cout << "2. Postava:\n";
    cout << "- Jmeno: Mnich\n";
    cout << "- Zivoty: 5\n";
    cout << "- Mana: 2\n";
    cout << "- Zlato: 2\n";
    cout << "- Zkusenosti: 0\n";
    cout << "- Utok: 3\n";
    cout << "- Schopnost: Meditace = Za 2 many aktivuje meditaci. Po meditaci se pridaji 5 zivotu\n\n";

    cout << "Vyber si svou postavu:\n";
    cout << "Hercules: 1\n";
    cout << "Mnich: 2\n";
    cin >> volbaPostavy;
    
    aktivujObchod();
    return 0;
    
}

bool aktivujObchod() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}


void obchodHercules() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 1 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlata (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 3) {
                    zivoty += 1;
                    zlato -= 3;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                pripravNaBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich() {
    vObchode = true;
    while (vObchode) {
        cout << "\n Vesnice 1 - Obchod pro mnicha\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 1 zlato (1)\n";
        cout << "+1 zivot: 3 zlata (2)\n";
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 3) {
                    zivoty += 1;
                    zlato -= 3;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Pridal sis 5 zivotu. Mas jich ted: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                pripravNaBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void pripravNaBoj() {
    cout << "\nRozhodl ses jit do boje, preju ti hodne stesti.\n";
    cout << "Cekaji te tri monstra a pote dorazis do dalsi vesnice.\n";
    cout << "Hodne stesti.\n";
    cout << "\nPravidla boje:\n";
    cout << "V souboji proti normalnimu monstru budes mit vyhodu, budes zacinat prvni.\n";
    cout << "Kazde kolo se rozhodujes mezi utokem a obranou.\n";
    cout << "Pokud zvolis utok uberes monstru tolik zivotu kolik mas v promnene utok, ale monstrum ti ubere 0,5.\n";
    cout << "Pokud zvolis obranu, zautocis jen polovinou sveho utoku, ale monstrum ti ubere jen 0,3.\n";
    cout << "Zakladni monstra vzdy jen utoci a padne z nich 1 zlato a daji ti 0,5 zkusenosti, za jednu zkusenost se ti prida zivot.\n";
    cout << "Mini bossove a hlavni boss muzou zautocit i zvolit obranu jako ty. Z nich pada vice zlata, mana a 1 zksenost.\n";
    cout << "Za zkusenosti ziskas navic zivoty, zlato vyuzijes ve vesnici na nakup.\n";
    cout << "Ted te ceka prvni monstrum pak 3 monstra postupne, pote prijdes do vesnice, pak te cekaji 4 monstra postupne, pak nasleduje vesnice.\n";
    cout << "Pote te cekaji 3 monstra postupne a pak budes bojovat proti trem monstrum najednou a pak  proti dvoum monstrum najednou.\n";
    cout << "Pak nasleduje vesnice a za ni te ceka boj s dvema minibossy, pak dojdes do posledni vesnice a za ni je hlavni boss.\n";
    cout << "Zakladni mostra maji 6 zivotu a silu 0.5. \n";
    rychlyBoj();



}

void rychlyBoj() {
    srand(time(0)); // resetuje čísla na nula
    cout << "Rychly boj na zacatek!\n";
    float zivotMonstra = 6.0;
    while (zivotMonstra > 0 && zivoty > 0) {
        cout << "\nZivoty: " << zivoty << " | Utok: " << utok << " | Zivoty monstra: " << zivotMonstra << "\n";
        cout << "Zvol akci:\n1. Utok (plny utok, monstrum ti ubere 0.5)\n2. Obrana (polovicni utok, monstrum ti ubere 0.3)\nVolba: ";
        int volba;
        cin >> volba;

        float aktualniUtok = utok;
        if (volba == 1) {
            zivotMonstra -= aktualniUtok;
            zivoty -= 0.5;
            cout << "Zautocil jsi za " << aktualniUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
            cout << "Monstrum te zranilo za 0.5. Mas " << zivoty << " zivotu.\n";
        } else if (volba == 2) {
            float obrannyUtok = aktualniUtok / 2.0;
            zivotMonstra -= obrannyUtok;
            zivoty -= 0.3;
            cout << "Zautocil jsi obrane za " << obrannyUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
            cout << "Monstrum te zranilo za 0.3. Mas " << zivoty << " zivotu.\n";
        } else {
            cout << "Neplatna volba, ztracis kolo!\n";
        }

        if (zivoty <= 0) {
            cout << "Byl jsi porazen. Konec hry.\n";
            exit(0);
        }
    }

    cout << "\nPorazil jsi první monstrum, nyni te ceka boj s tremi dalsimi monstry.\n";

    zkusenosti += 0.5;

    if (rand() % 100 < 75) {  // šance na vypadnutí zlata
        zlato++;
        cout << "Z monstra spadlo zlato!\n";
    } else {
        cout << "Z monstra nespadlo zlato.\n";
    }

    cout << "Ziskal jsi 0.5 zkusenosti.\n";
    cout << "Celkem mas: " << zlato << " zlata, " << zkusenosti << " zkusenosti.\n";

    zacniBoj(); 
}


void zacniBoj() {
    srand(time(0));
    for (int i = 1; i <= 3; i++) {
        cout << "\nBojujes s monstrem cislo " << i << "!\n";
        float zivotMonstra = 6.0;
        while (zivotMonstra > 0 && zivoty > 0) {
            int volba;
            cout << "\nZivoty: " << zivoty << " | Utok: " << utok << " | Zivoty monstra: " << zivotMonstra << "\n";
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;
            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                zivotMonstra -= aktualniUtok;
                zivoty -= 0.5;
                cout << "Zautocil jsi za " << aktualniUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.5. Mas " << zivoty << " zivotu.\n";
            } else if (volba == 2) {
                float obrannyUtok = aktualniUtok / 2.0;
                zivotMonstra -= obrannyUtok;
                zivoty -= 0.3;
                cout << "Zautocil jsi obrane za " << obrannyUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.3. Mas " << zivoty << " zivotu.\n";
            } else {
                cout << "Neplatna volba, ztracis kolo!\n";
            }

            if (zivoty <= 0) {
                cout << "Byl jsi porazen. Konec hry.\n";
                exit(0);
            }
        }

        cout << "\nPorazil jsi monstrum!\n";
        zkusenosti += 0.5;

        if (zkusenosti >= 1.0) {
            zivoty += 1;
            zkusenosti -= 1.0;
            cout << "Ziskal jsi jeden zivot za jednu zkusenost. Mas " << zivoty << " zivotu.\n";
        }

        if (rand() % 100 < 75) {
            zlato++;
            cout << "Z monstra spadlo zlato!\n";
        } else {
            cout << "Z monstra nespadlo zlato.\n";
        }

        cout << "Celkem mas: " << zlato << " zlata, " << zkusenosti << " zkusenosti.\n";
    }

    cout << "\nPorazil jsi vsechna tri monstra! Pokracujes dal do dalsi vesnice.\n";
    aktivujObchod2();
}


bool aktivujObchod2() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules2();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich2();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}

void obchodHercules2() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 2 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 1 zlata (1)\n";
        cout << "+1 zivot: 3 zlata (2)\n";
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 3) {
                    zivoty += 1;
                    zlato -= 3;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniDruhyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich2() {
       vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 2 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 1 zlato (1)\n";
        cout << "+1 zivot: 3 zlata (2)\n";  
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 3) {
                    zivoty += 1;
                    zlato -= 3;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniDruhyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void zacniDruhyBoj() {
    srand(time(0));
    for (int i = 1; i <= 4; i++) {
        cout << "\nBojujes s monstrem cislo " << i << "!\n";
        float zivotMonstra = 6.0;

        while (zivotMonstra > 0 && zivoty > 0) {
            int volba;
            cout << "\nZivoty: " << zivoty << " | Utok: " << utok << " | Zivoty monstra: " << zivotMonstra << "\n";
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;
            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                zivotMonstra -= aktualniUtok;
                zivoty -= 0.5;
                cout << "Zautocil jsi za " << aktualniUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.5. Mas " << zivoty << " zivotu.\n";
            } else if (volba == 2) {
                float obrannyUtok = aktualniUtok / 2.0;
                zivotMonstra -= obrannyUtok;
                zivoty -= 0.3;
                cout << "Zautocil jsi obrane za " << obrannyUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.3. Mas " << zivoty << " zivotu.\n";
            } else {
                cout << "Neplatna volba, ztracis kolo!\n";
            }

            if (zivoty <= 0) {
                cout << "Byl jsi porazen. Konec hry.\n";
                exit(0);
            }
        }

        cout << "\nPorazil jsi monstrum!\n";
        zkusenosti += 0.5;

        if (zkusenosti >= 1.0) {
            zivoty += 1;
            zkusenosti -= 1.0;
            cout << "Ziskal jsi zivot za zkusenosti. Mas " << zivoty << " zivotu.\n";
        }

        if (rand() % 100 < 75) {
            zlato++;
            cout << "Z monstra spadlo zlato!\n";
        } else {
            cout << "Z monstra nespadlo zlato.\n";
        }

        cout << "Celkem mas: " << zlato << " zlata, " << zkusenosti << " zkusenosti.\n";
    }

    cout << "\nPorazil jsi vsechna ctyri monstra! Pokracujes dal hloubeji do temneho lesa.\n";
    aktivujObchod3();
}

bool aktivujObchod3() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules3();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich3();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}

void obchodHercules3() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 3 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 1 zlata (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniTretiBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich3() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 3 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 1 zlato (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";  
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 1) {
                    utok += 1;
                    zlato -= 1;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniTretiBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}


void zacniTretiBoj() {
    srand(time(0));
    for (int i = 1; i <= 3; i++) {
        cout << "\nBojujes s monstrem cislo " << i << " ve tretim boji!\n";
        float zivotMonstra = 6.0;
        bool zlatoSpadlo = false;

        while (zivotMonstra > 0 && zivoty > 0) {
            int volba;
            cout << "\nZivoty: " << zivoty << " | Utok: " << utok << " | Zivoty monstra: " << zivotMonstra << "\n";
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;
            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                zivotMonstra -= aktualniUtok;
                zivoty -= 0.5;
                cout << "Zautocil jsi za " << aktualniUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.5. Mas " << zivoty << " zivotu.\n";
            } else if (volba == 2) {
                float obrannyUtok = aktualniUtok / 2.0;
                zivotMonstra -= obrannyUtok;
                zivoty -= 0.3;
                cout << "Zautocil jsi obrane za " << obrannyUtok << ". Monstrum ma " << (zivotMonstra > 0 ? zivotMonstra : 0) << " zivotu.\n";
                cout << "Monstrum te zranilo za 0.3. Mas " << zivoty << " zivotu.\n";
            } else {
                cout << "Neplatna volba, ztracis kolo!\n";
            }

            if (zivoty <= 0) {
                cout << "Byl jsi porazen. Konec hry.\n";
                exit(0);
            }
        }

        cout << "\nPorazil jsi monstrum!\n";
        zkusenosti += 0.5;

        if (zkusenosti >= 1.0) {
            zivoty += 1;
            zkusenosti -= 1.0;
            cout << "Ziskal jsi zivot za zkusenosti. Mas " << zivoty << " zivotu.\n";
        }

        if (rand() % 100 < 75) {
            zlato++;
            cout << "Z monstra spadlo zlato!\n";
        } else {
            cout << "Z monstra nespadlo zlato.\n";
        }

        cout << "Celkem mas: " << zlato << " zlata, " << zkusenosti << " zkusenosti.\n";
    }

    cout << "\nPorazil jsi vsechna tri monstra ve tretim boji! Blizis se k poslednimu souboji...\n";
    aktivujObchod4();
}

bool aktivujObchod4() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules4();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich4();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}


void obchodHercules4() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 4 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlata (1)\n";  // dražší o 1
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniCtvrtyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich4() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 4 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlata (1)\n";  // dražší o 1
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniCtvrtyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}


void zacniCtvrtyBoj() {
    srand(time(0));
    float zivotMonstra[3] = {6.0, 6.0, 6.0};

    cout << "\nZacina ctvry boj – bojujes proti trem monstrum zaroven!\n";

    while ((zivotMonstra[0] > 0 || zivotMonstra[1] > 0 || zivotMonstra[2] > 0) && zivoty > 0) {
        cout << "\nZivoty: " << zivoty << " | Utok: " << utok << "\n";
        for (int i = 0; i < 3; i++) {
            cout << "Monstrum " << (i + 1) << ": " << (zivotMonstra[i] > 0 ? zivotMonstra[i] : 0) << " zivotu\n";
        }

        int cil;
        cout << "Na ktere monstrum chces zautocit? (1-3): ";
        cin >> cil;

        if (cil < 1 || cil > 3 || zivotMonstra[cil - 1] <= 0) {
            cout << "Neplatny cil nebo monstrum je uz mrtve. Ztracis kolo!\n";
        } else {
            int volba;
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;

            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                zivotMonstra[cil - 1] -= aktualniUtok;
                cout << "Zautocil jsi na monstrum " << cil << " za " << aktualniUtok << ".\n";
            } else if (volba == 2) {
                float obrannyUtok = aktualniUtok / 2.0;
                zivotMonstra[cil - 1] -= obrannyUtok;
                cout << "Zautocil jsi obrane na monstrum " << cil << " za " << obrannyUtok << ".\n";
            } else {
                cout << "Neplatna volba. Ztracis kolo!\n";
            }

            if (zivotMonstra[cil - 1] <= 0) {
                int nahoda = rand() % 100;
                if (nahoda < 75) {
                    zlato += 1;
                    cout << "Z monstra spadlo zlato! Mas celkem " << zlato << " zlata.\n";
                } else {
                    cout << "Z monstra nespadlo zlato.\n";
                }
            }
        }

        float celkoveZraneni = 0.0;
        for (int i = 0; i < 3; i++) {
            int volba;
            if (zivotMonstra[i] > 0) {
                celkoveZraneni += (volba == 2 ? 0.3 : 0.5);
            }
        }

        zivoty -= celkoveZraneni;
        cout << "Monstra te zranila dohromady za " << celkoveZraneni << ". Mas " << zivoty << " zivotu.\n";

        if (zivoty <= 0) {
            cout << "Byl jsi porazen. Konec hry.\n";
            exit(0);
        }
    }

    cout << "\nPorazil jsi vsechna tri monstra!\n";
    zkusenosti += 1.5;

    if (zkusenosti >= 1.0) {
        zivoty += 1;
        zkusenosti -= 1.0;
        cout << "Ziskal jsi zivot za zkusenosti. Mas " << zivoty << " zivotu.\n";
    }

    cout << "Celkem mas " << zlato << " zlata.\n";
    cout << "Aktualni zkusenosti: " << zkusenosti << "\n";

    cout << "\nSouboj dokonceny – pokracujes dal!\n";
    aktivujObchod5();
}


bool aktivujObchod5() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules5();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich5();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}

void obchodHercules5() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 5 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlata (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniPatyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}


void obchodMnich5() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 5 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlata (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                zacniPatyBoj();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}





void zacniPatyBoj() {
    srand(time(0));
    float zivotMonstra[2] = {6.0, 6.0};
    bool zlatoSpadlo[2] = {false, false};

    cout << "\nZacina paty boj – bojujes proti dvema monstrum zaroven!\n";

    while ((zivotMonstra[0] > 0 || zivotMonstra[1] > 0) && zivoty > 0) {
        cout << "\nZivoty: " << zivoty << " | Utok: " << utok << "\n";
        for (int i = 0; i < 2; i++) {
            cout << "Monstrum " << (i + 1) << ": " << (zivotMonstra[i] > 0 ? zivotMonstra[i] : 0) << " zivotu\n";
        }

        int cil;
        cout << "Na ktere monstrum chces zautocit? (1-2): ";
        cin >> cil;

        int volba = 0;
        if (cil < 1 || cil > 2 || zivotMonstra[cil - 1] <= 0) {
            cout << "Neplatny cil nebo monstrum je uz mrtve. Ztracis kolo!\n";
        } else {
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;

            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                zivotMonstra[cil - 1] -= aktualniUtok;
                cout << "Zautocil jsi na monstrum " << cil << " za " << aktualniUtok << ".\n";
            } else if (volba == 2) {
                float obrannyUtok = aktualniUtok / 2.0;
                zivotMonstra[cil - 1] -= obrannyUtok;
                cout << "Zautocil jsi obrane na monstrum " << cil << " za " << obrannyUtok << ".\n";
            } else {
                cout << "Neplatna volba. Ztracis kolo!\n";
            }

            if (zivotMonstra[cil - 1] <= 0 && !zlatoSpadlo[cil - 1]) {
                zlatoSpadlo[cil - 1] = true;
                if (rand() % 100 < 75) {
                    zlato++;
                    cout << "Z monstra spadlo zlato!\n";
                } else {
                    cout << "Z monstra nespadlo zlato.\n";
                }
            }
        }

        float celkoveZraneni = 0.0;
        for (int i = 0; i < 2; i++) {
            if (zivotMonstra[i] > 0) {
                celkoveZraneni += (volba == 2 ? 0.3 : 0.5);
            }
        }

        zivoty -= celkoveZraneni;
        cout << "Monstra te zranila dohromady za " << celkoveZraneni << ". Mas " << zivoty << " zivotu.\n";

        if (zivoty <= 0) {
            cout << "Byl jsi porazen. Konec hry.\n";
            exit(0);
        }
    }

    cout << "\nPorazil jsi obe monstra!\n";
    zkusenosti += 1.5;

    if (zkusenosti >= 1.0) {
        zivoty += 1;
        zkusenosti -= 1.0;
        cout << "Ziskal jsi zivot za zkusenosti. Mas " << zivoty << " zivotu.\n";
    }

    cout << "Celkem mas " << zlato << " zlata.\n";
    cout << "Aktualni zkusenosti: " << zkusenosti << "\n";

    cout << "\nPaty boj dokonceny – pokracujes dal!\n";
    aktivujObchod6();
}


bool aktivujObchod6() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules6();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich6();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}

void obchodHercules6() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 6 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlato (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";  
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                minibossKonverzace();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich6() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 6 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlato (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";  
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                minibossKonverzace();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void minibossKonverzace() {
cout << "Uz chces odejit z vesnice a vydat se dal. Jeste te zastavi vesnican a rekne: Ted te ceka nejvetsi zkouska, dva mini bossove bratri Vexove chrani posledni vesnci.\n";
cout << "Smrtelna vez je az na konci vesnice a v ni je hlavni bos Vextile. Nejdrive musis porazit oba mini bossy, cekaji uz na tebe, hodne stesi.\n";
cout << "Pomalu se blizis k vesnci tesne pred ni stoji dva pomocnici, dva mini bossove, dva bratri Vexove\n";
cout << "Vypadaji jako normalni muzi, ale ty vis ze jsou to zradci a zabijaci. Prvni bratr te oslovi:\n";
cout << endl;
cout << "Prvni bratr: Tak to jsi ty! Ty jsi zabil vsechny monstra a myslis ze premuzes i Vextile. Tak to te musim zklamat, zemres tam kde tvuj otec, my te zabijeme jako jeho.\n";
cout << endl;
cout << "Druhy bratr: Mozna ze jsi porazil monstra, ale my jsme lepsi. Ty jsi chces vyskakovat na samotneho Vextile a pritom neporazis ani nas, stejne; jako tvuj otec.\n";
cout << endl;
cout << "Prvni monstrum: Zemres jako tvuj otec a s tebou zemre i posledni boje schopni muz, zemre nadeje a Vextile bude nejsilnejsi vladce.\n";
cout << endl;
cout << "Druhy bratr: Bude dal rozsirovat svoji moc, budou vzikat nove vesncie, nova monstra a uz nic ho nezastavi.\n";
cout << endl;
cout << "Podivas se na oba bratri a sebevedome reknes: Porazim vas oba a pak i samotneho hlavniho bosse Vextile. Poomstim tak sveho otce a zachranim vesnici.\n";
cout << endl;
cout << "Druhy bratr: Pekna pohadka, ale my nejsme monstra kamarade, my jsme silnejsi chytrejsi, lepsi.\n";
cout << endl;
cout << "Prvni bratr: Nas oba se ti porazit nepodari, jsme bratri, utocime i branime se oba nejednou. Jsme jednotni a ty zemres. \n";
cout << endl;
cout << "Druhy bratr: Kdys se te podari zranit jednoho, druhy te mezitim zabije a branit se obou nasim utokum nezvladnes.\n";
cout << endl;
cout << "Ty se vsak nenechas zastrasit, vis jak se proti dvojtym utokum branit a jak utocit efektivne. Naucil te to stary knihovnik, vis presne co a jak.\n";
cout << "Jsi pripraven porazit oba mini bossy, dojit do vesnice, zabit i hlavniho bosse a pomstit tak sveho otce.\n";
cout << "Druhy bratr: Dost bylo slov, boj zacina, priprav se na smrt!\n";

zacniSestyboj();

}


void zacniSestyboj() {
    srand(time(0));
    float zivotyMinibossu[2] = {20.0, 20.0};
    bool hracSeBranilMinuleKolo = false; // NOVÁ PROMĚNNÁ

    cout << "\nZacina paty boj – bojujes proti 2 minibossum najednou!\n";
    while ((zivotyMinibossu[0] > 0 || zivotyMinibossu[1] > 0) && zivoty > 0) {

        // Nejprve útočí minibossové
        for (int i = 0; i < 2; i++) {
            if (zivotyMinibossu[i] > 0) {
                float dmg = hracSeBranilMinuleKolo ? 0.5 : 1.0;
                zivoty -= dmg;
                cout << "Miniboss " << (i + 1) << " na tebe utocil za " << dmg << " zivotu.\n";
            }
        }

        cout << "Mas " << zivoty << " zivotu.\n";
        if (zivoty <= 0) {
            cout << "Byl jsi porazen minibossy. Konec hry.\n";
            exit(0);
        }

        // Hráčův tah
        cout << "\nZivoty: " << zivoty << " | Utok: " << utok << "\n";
        for (int i = 0; i < 2; i++) {
            cout << "Miniboss " << (i + 1) << ": " << (zivotyMinibossu[i] > 0 ? zivotyMinibossu[i] : 0) << " zivotu\n";
        }

        int cil;
        cout << "Na ktereho minibosse chces zautocit? (1 nebo 2): ";
        cin >> cil;

        if (cil < 1 || cil > 2 || zivotyMinibossu[cil - 1] <= 0) {
            cout << "Neplatny cil nebo miniboss je uz mrtvy. Ztracis kolo!\n";
            hracSeBranilMinuleKolo = false;
        } else {
            int volba;
            cout << "Zvol akci:\n1. Utok \n2. Obrana \nVolba: ";
            cin >> volba;

            float aktualniUtok = utok;
            bool obranaMinibosse = (rand() % 100) < 50;

            if (volba == 1) {
                if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                    aktualniUtok *= 2;
                    kolaDeloveRany--;
                    if (kolaDeloveRany == 0) delovaRanaAktivni = false;
                }
                hracSeBranilMinuleKolo = false;
            } else if (volba == 2) {
                aktualniUtok /= 2.0;
                hracSeBranilMinuleKolo = true;
            } else {
                cout << "Neplatna volba. Ztracis kolo!\n";
                aktualniUtok = 0;
                hracSeBranilMinuleKolo = false;
            }

            if (obranaMinibosse) {
                aktualniUtok /= 2.0;
                cout << "Miniboss se brani! Tvuj utok je snizen na polovinu.\n";
            }

            zivotyMinibossu[cil - 1] -= aktualniUtok;
            cout << "Zautocil jsi na minibosse " << cil << " za " << aktualniUtok << " poskozeni.\n";
        }
    }

    cout << "\nPorazil jsi oba minibossy a ziskal jsi jejich poklad.\n";
    zlato += 15;
    zkusenosti += 3;
    mana += 2.0;

    if (zkusenosti >= 1.0) {
        zivoty += 1;
        zkusenosti -= 1.0;
        cout << "Ziskal jsi dalsi zivot za zkusenosti. Mas " << zivoty << " zivotu.\n";
    }

    cout << "Celkem mas: " << zlato << " zlata a " << zkusenosti << " zkusenosti.\n";
    cout << "\nSesty souboj ukoncen – pokracujes dal!\n";

    aktivujObchod7();
}



bool aktivujObchod7() {
    if (volbaPostavy == 1) {
        cout << "Zde je obchod pro Herculese\n";
        obchodHercules7();
        return true;
    } else if (volbaPostavy == 2) {
        cout << "Zde je obchod pro Mnicha\n";
        obchodMnich7();
        return true;
    } else {
        cout << "Neplatna volba, hra se ukoncuje.\n";
        return false;
    }
}

void obchodHercules7() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 6 - Obchod pro Herculese:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlato (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";  
        cout << "Delova rana: 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    delovaRanaAktivni = true;
                    kolaDeloveRany = 2;
                    mana -= 2;
                    cout << "Aktivoval jsi Delovou ranu!\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                hlavnibossKonerzace();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void obchodMnich7() {
    vObchode = true;
    while (vObchode) {
        cout << "\nVesnice 6 - Obchod pro Mnicha:\n";
        cout << "Zlato: " << zlato << " | Mana: " << mana << "\n";
        cout << "+1 utok: 2 zlato (1)\n";
        cout << "+1 zivot: 4 zlata (2)\n";  
        cout << "Meditace (+5 zivoty): 2 many (3)\n";
        cout << "Odejit z obchodu: (4)\n";
        cout << "Volba: ";
        cin >> nakupVolba;

        switch (nakupVolba) {
            case 1:
                if (zlato >= 2) {
                    utok += 1;
                    zlato -= 2;
                    cout << "Zvysil sis utok na " << utok << ".\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 2:
                if (zlato >= 4) {
                    zivoty += 1;
                    zlato -= 4;
                    cout << "Zivoty: " << zivoty << "\n";
                } else {
                    cout << "Nemas dostatek zlata.\n";
                }
                break;
            case 3:
                if (mana >= 2) {
                    zivoty += 5;
                    mana -= 2;
                    cout << "Meditace dokoncena. Mas " << zivoty << " zivotu.\n";
                } else {
                    cout << "Nemas dostatek many.\n";
                }
                break;
            case 4:
                vObchode = false;
                hlavnibossKonerzace();
                break;
            default:
                cout << "Neplatna volba.\n";
        }
    }
}

void hlavnibossKonerzace() {
cout << "Nyni uz jsi porazil vsechna monstra, uz jsi porazil i mini bossy a nyni se nachazis pred mistem kam cela tvoje cesta smerovala pred Smrtelnou vezi.\n";
cout << "Seberes vsechnu odvahu a vstoupis dovnitr. Vez je vysoka, Vextile je az nahore. Je tam schvalne zbabelec, chce aby ses vycerpal stoupanim a nemel tolik sil na boj.\n";
cout << "Ty vsak vytahnes lektvar od knihovnika, je to lektvar levitace, staci ti akorat. Vystoupas az do posledniho patra a spatris hlavniho bosse Vextila.\n";
cout << "Vextile: Tohle jsem necekal a taky jsem necekal ze se dostanes tak daleko, ale ted zemres! *Rozbehne se proti tobe, tvuj posledni boj zacina.\n";
cout << endl;
cout << "Dej si pozor. Vextile meni kazde kolo svou taktiku.\n";
cout << "Muze utocit, branit se, lecit nebo dat kriticky utok.\n";
cout << "Kdyz opakuje stejnou schopnost, zesiluje ji.\n";
cout << "Po trech tvych utocich ti muze zablokovat utok.\n";
cout << "Ma sanci ti resetovat schopnost a manu.\n";
bojSVextilem ();
}

// presne popisuji co kazda funkce dela abych dodržel podminky ohledne halvniho bosse
void bojSVextilem() {
    srand(time(0));
    float zivotyVextila = 40.0;
    float utokVextila = 2.0;
    string posledniEfekt = "";
    string aktualniEfekt = "";
    int nasobeniEfektu = 1;
    int zasahyPoSobe = 0;
    bool blokovanyUtok = false;
    int kolaBlokace = 0;

    while (zivotyVextila > 0 && zivoty > 0) {
        cout << "\nZivoty: " << zivoty << " | Utok: " << utok;
        if (blokovanyUtok) cout << " | (UTOK ZABLOKOVAN)";
        cout << " | Zivoty Vextila: " << zivotyVextila << "\n";

        // Nove kolo - vyber efektu
        int efekt = rand() % 4;
        switch (efekt) {
            case 0: aktualniEfekt = "utok"; break;
            case 1: aktualniEfekt = "obrana"; break;
            case 2: aktualniEfekt = "regenerace"; break;
            case 3: aktualniEfekt = "kriticka_sance"; break;
        }

        // Nasobeni efektu
        if (aktualniEfekt == posledniEfekt) {
            nasobeniEfektu *= 2;
        } else {
            nasobeniEfektu = 1;
        }
        posledniEfekt = aktualniEfekt;

        // Aplikace efektu
        float bonusUtokVextila = 0.0;
        float obranaBonus = 1.0;
        bool kritickyUtok = false;

        if (aktualniEfekt == "utok") {
            bonusUtokVextila = (rand() % 3 + 1) * nasobeniEfektu;
        } else if (aktualniEfekt == "obrana") {
            obranaBonus = 0.5 / nasobeniEfektu;
        } else if (aktualniEfekt == "regenerace") {
            float regen = (rand() % 2 + 1) * nasobeniEfektu;
            zivotyVextila += regen;
            if (zivotyVextila > 40.0) zivotyVextila = 40.0;
            cout << "Vextile se zregeneroval o " << regen << " zivotu!\n";
        } else if (aktualniEfekt == "kriticka_sance") {
            int kritSance = rand() % 100;
            if (kritSance < 25 * nasobeniEfektu) {
                kritickyUtok = true;
                cout << "Vextile provadi KRITICKY UTOK!\n";
            }
        }

        // Sance na reset hracovych bonusu (10 %)
        int reset = rand() % 100;
        if (reset < 10) {
            delovaRanaAktivni = false;
            kolaDeloveRany = 0;
            mana = 0;
            cout << "Vextile resetoval tve schopnosti!\n";
        }

        // Vextiluv utok probiha jako prvni
        float finalniUtokVextila = utokVextila + bonusUtokVextila;
        if (kritickyUtok) finalniUtokVextila *= 2;

        zivoty -= finalniUtokVextila;
        cout << "Vextile ti zpusobil " << finalniUtokVextila << " zraneni. Mas " << zivoty << " zivotu.\n";

        if (zivoty <= 0) break;

        // Hracova volba akce
        int volba;
        cout << "Zvol akci:\n1. Utok\n2. Obrana\nVolba: ";
        cin >> volba;

        float aktualniUtok = utok;
        bool utocil = false;

        if (volba == 1 && !blokovanyUtok) {
            utocil = true;
            if (volbaPostavy == 1 && delovaRanaAktivni && kolaDeloveRany > 0) {
                aktualniUtok *= 2;
                kolaDeloveRany--;
                if (kolaDeloveRany == 0) delovaRanaAktivni = false;
            }
            zivotyVextila -= aktualniUtok * obranaBonus;
            cout << "Zautocil jsi za " << aktualniUtok * obranaBonus << "!\n";
        } else if (volba == 2 || blokovanyUtok) {
            float obrannyUtok = utok / 2.0 * obranaBonus;
            zivotyVextila -= obrannyUtok;
            cout << "Branil ses a udelil " << obrannyUtok << " skody.\n";
        } else {
            cout << "Neplatna volba, ztracis kolo!\n";
        }

        // Sleduje po sobe utoky
        if (utocil) {
            zasahyPoSobe++;
        } else {
            zasahyPoSobe = 0;
        }

        if (zasahyPoSobe >= 3) {
            blokovanyUtok = true;
            kolaBlokace = 2;
            zasahyPoSobe = 0;
            cout << "Vextile ti ukradl utok na 2 kola!\n";
        }

        // Odpocet bloku
        if (blokovanyUtok) {
            kolaBlokace--;
            if (kolaBlokace <= 0) {
                blokovanyUtok = false;
                cout << "Tvuj utok je opet dostupny!\n";
            }
        }
    }

    if (zivoty <= 0) {
        cout << "\nByl jsi porazen Vextilem. Konec hry.\n";
        exit(0);
    } else {
        cout << "\nZvitezil jsi nad Vextilem! Ziskavas 10 zlata a 2 zkusenosti.\n";
        zlato += 10;
        zkusenosti += 2.0;
    }

    cout << "Celkem mas: " << zlato << " zlata, " << zkusenosti << " zkusenosti.\n";
    konec();
}


void konec() {
cout << endl;
cout << "Gratuluju dokazal jsi to porazil jsi hlavniho bosse Vextile, zachranil jsi tak vesnice a pomstil sveho otce.\n";
cout << "Stary knihovnik by byl na tebe pysny je z tebe skutecny hrdina, ale jeste je tu posledni ukol.\n";
cout << "Musis vratit zivot nevinym vesnicanum, mas pred sebou tela vsech 13 monster, pouzijes lektvar s krve Vextile a polijes vsechny tela.\n";
cout << "Nyni tela ozivaji v puvodni podobe ty se stavas vladcem veze jako tvuj otce a navracis mir a klid do oklnich vesnic vladni moudre\n";
cout << endl;
cout << endl;
cout << "KONEC HRY";
}


int main() {
    uvodniKonverzace();
    return 0;
}
